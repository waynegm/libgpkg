version: 1.0.{build}

clone_folder: c:\projects\libgpkg

platform: x64
configuration: Release

environment:
  CMAKE: c:\cmake\cmake-3.0.2-win32-x86\bin\cmake


before_build:
  # get a recent version of cmake
  - mkdir c:\cmake
  - cd c:\cmake
  - ps: Start-FileDownload 'http://www.cmake.org/files/v3.0/cmake-3.0.2-win32-x86.zip'
  - 7z x "cmake-3.0.2-win32-x86.zip" > nul
  - cd c:\projects\libgpkg
  - '"C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\SetEnv.cmd" /x64'
  - c:\cmake\cmake-3.0.2-win32-x86\bin\cmake -G "NMake Makefiles" -DCMAKE_BUILD_TYPE:STRING=Release
  - dir

build_script:
  - cd c:\projects\libgpkg
  - msbuild libgpkg.sln
